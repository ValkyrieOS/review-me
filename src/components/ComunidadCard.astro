---
import { Image } from "astro:assets";

interface Props {
  name: string;
  slug: string;
  flag: ImageMetadata | null;
  comingSoon?: boolean;
}

const { name, slug, flag, comingSoon = false } = Astro.props;
---

<div class="relative">
  {
    comingSoon ? (
      <div class="group relative block aspect-[4/3] rounded-2xl overflow-hidden bg-neutral-900 border border-neutral-800 cursor-not-allowed">
        <!-- Flag Image with grayscale -->
        {flag && (
          <Image
            src={flag}
            alt={`Bandera de ${name}`}
            class="w-full h-full object-cover grayscale opacity-50"
            width={400}
            height={300}
          />
        )}
        {!flag && (
          <div class="w-full h-full bg-neutral-800 flex items-center justify-center grayscale opacity-50">
            <span class="text-neutral-500 text-4xl">üè≥Ô∏è</span>
          </div>
        )}

        <!-- Overlay gradient -->
        <div class="absolute inset-0 bg-gradient-to-t from-neutral-950/90 via-neutral-950/40 to-transparent" />

        <!-- Coming Soon Banner -->
        <div class="absolute inset-0 flex items-center justify-center">
          <div class="bg-neutral-900/95 backdrop-blur-sm border border-neutral-700 px-6 py-3 rounded-lg shadow-xl transform -rotate-3">
            <span class="text-sm font-semibold text-neutral-300 uppercase tracking-wider">
              Pr√≥ximamente
            </span>
          </div>
        </div>

        <!-- Content -->
        <div class="absolute inset-x-0 bottom-0 p-6">
          <h2 class="text-xl font-semibold text-neutral-400">
            {name}
          </h2>
        </div>
      </div>
    ) : (
      <a
        href={`${import.meta.env.BASE_URL}/comunidad/${slug}`}
        class="group relative block aspect-[4/3] rounded-2xl overflow-hidden bg-neutral-900 border border-neutral-800 hover:border-neutral-600 transition-all duration-300"
      >
        <!-- Flag Image -->
        {flag && (
          <Image
            src={flag}
            alt={`Bandera de ${name}`}
            class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
            width={400}
            height={300}
          />
        )}
        {!flag && (
          <div class="w-full h-full bg-neutral-800 flex items-center justify-center">
            <span class="text-neutral-500 text-4xl">üè≥Ô∏è</span>
          </div>
        )}

        <!-- Overlay gradient -->
        <div class="absolute inset-0 bg-gradient-to-t from-neutral-950/90 via-neutral-950/20 to-transparent" />

        <!-- Content -->
        <div class="absolute inset-x-0 bottom-0 p-6">
          <h2 class="text-xl font-semibold text-neutral-50 group-hover:text-white transition-colors">
            {name}
          </h2>

          <div class="mt-2 flex items-center gap-2 text-sm text-neutral-400 group-hover:text-neutral-300 transition-colors">
            <span>Ver transportes</span>
            <svg
              class="w-4 h-4 group-hover:translate-x-1 transition-transform"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5l7 7-7 7"
              />
            </svg>
          </div>
        </div>
      </a>
    )
  }
</div>
